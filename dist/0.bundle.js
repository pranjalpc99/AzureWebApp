(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{41:function(e,n,a){"use strict";a.r(n),function(e){var n=a(17),o=a(90),t=a(7);const{CommunicationIdentityClient:i}=a(88),{DefaultAzureCredential:d}=a(87),{Howl:s,Howler:c}=a(86);let l,r,m;t.AzureLogger.verbose=(...e)=>{console.info(...e)},t.AzureLogger.info=(...e)=>{console.info(...e)},t.AzureLogger.warning=(...e)=>{console.info(...e)},t.AzureLogger.error=(...e)=>{console.info(...e)};const u=document.getElementById("myUserId"),g=(document.getElementById("userToken-id-input"),document.getElementById("callee-id-input")),p=document.getElementById("call-button"),w=document.getElementById("hang-up-button"),y=document.getElementById("stop-Video"),b=document.getElementById("start-Video"),f=document.getElementById("accept-Call");var E=document.getElementById("ringtone");let I,v,C,h,L,k,B;function V(e){z(e),e.on("availabilityChanged",async()=>{e.isAvailable?z(e):L.dispose()}),e.isAvailable&&z(e)}function A(e){e.videoStreams.forEach(e=>{V(e)}),e.on("videoStreamsUpdated",e=>{e.added.forEach(e=>{V(e)})})}function U(e){console.log(e.callEndReason),e.remoteParticipants.forEach(e=>{A(e)}),e.on("remoteParticipantsUpdated",e=>{e.added.forEach(e=>{A(e)})})}async function S(){h=new n.Renderer(C);const e=await h.createView();document.getElementById("myVideo").appendChild(e.target)}async function z(e){L=new n.Renderer(e);const a=await L.createView();document.getElementById("remoteVideo").appendChild(a.target)}(async()=>{const e=new i("endpoint=https://testapicommunication.communication.azure.com/;accesskey=so6HgfoI5ukEaaiaBIHHvxidJrNAhLBs+hNwaj3fCU4VX1HfugSFW9/2sml3sp/IQ+WoOLILTFiLDwP49/7nMQ==");let a=await e.createUserAndToken(["voip"]);const{token:d,expiresOn:s,user:c}=a;console.log("\nCreated an identity with ID: "+c.communicationUserId),console.log(`\nIssued an access token with 'voip' scope that expires at ${s}:`),console.log(d),k=d,B=c.communicationUserId,async function(){u.innerHTML=B;const e=new n.CallClient({logger:t.AzureLogger}),a=new o.a(k);r=await e.createCallAgent(a,{displayName:"optional ACS user name"}),v=await e.getDeviceManager(),p.disabled=!1,console.log("call button prop"+p.disabled),r.on("incomingCall",async e=>{m=e;const a=(await v.getCameras())[0];C=new n.LocalVideoStream(a),S();const o=e.incomingCall.callerInfo.identifier;e.incomingCall.state;console.log("State->".concat(o)),async function(){E.loop=!0,E.load(),E.play()}(),y.disabled=!1,p.disabled=!0,w.disabled=!1,f.disabled=!1}),r.on("callsUpdated",e=>{e.removed.forEach(e=>{h.dispose(),L.dispose(),w.disabled=!0,p.disabled=!1,y.disabled=!0})})}()})().catch(e=>{console.log("Encountered an error"),console.log(e)}),p.addEventListener("click",async()=>{const e=(await v.getCameras())[0];C=new n.LocalVideoStream(e),I={videoOptions:{localVideoStreams:[C]}},S(),y.disabled=!1,b.disabled=!0;const a=g.value;l=r.startCall([{communicationUserId:a}],I),U(l),w.disabled=!1,p.disabled=!0}),y.addEventListener("click",async()=>{await l.stopVideo(C),h.dispose(),b.disabled=!1,y.disabled=!0}),b.addEventListener("click",async()=>{await l.startVideo(C),S(),y.disabled=!1,b.disabled=!0}),w.addEventListener("click",async()=>{h.dispose(),L.dispose(),await l.hangUp(),w.disabled=!0,p.disabled=!1,y.disabled=!0}),f.addEventListener("click",async()=>{E.pause();const e=await m.incomingCall.accept({videoOptions:{localVideoStreams:[C]}});l=e,U(e)})}.call(this,a(14))}},[[41,1,2]]]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vMC5idW5kbGUuanMiXSwibmFtZXMiOlsid2luZG93IiwicHVzaCIsIjQxIiwibW9kdWxlIiwiX193ZWJwYWNrX2V4cG9ydHNfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJyIiwicHJvY2VzcyIsIl9henVyZV9jb21tdW5pY2F0aW9uX2NhbGxpbmdfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyIsIl9henVyZV9jb21tdW5pY2F0aW9uX2NvbW1vbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fIiwiX2F6dXJlX2xvZ2dlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fIiwiQ29tbXVuaWNhdGlvbklkZW50aXR5Q2xpZW50IiwiRGVmYXVsdEF6dXJlQ3JlZGVudGlhbCIsIkhvd2wiLCJIb3dsZXIiLCJjYWxsIiwiY2FsbEFnZW50IiwiaW5Db21lIiwidmVyYm9zZSIsImFyZ3MiLCJjb25zb2xlIiwiaW5mbyIsIndhcm5pbmciLCJlcnJvciIsInVzZXJJZFRleHQiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiY2FsbGVlSW5wdXQiLCJjYWxsQnV0dG9uIiwiaGFuZ1VwQnV0dG9uIiwic3RvcFZpZGVvQnV0dG9uIiwic3RhcnRWaWRlb0J1dHRvbiIsImFjY2VwdENhbGxCdXR0b24iLCJ4IiwicGxhY2VDYWxsT3B0aW9ucyIsImRldmljZU1hbmFnZXIiLCJsb2NhbFZpZGVvU3RyZWFtIiwicmVuZGVyZXJMb2NhbCIsInJlbmRlcmVyUmVtb3RlIiwidXNlclRva2VuIiwidXNlcklkIiwiaGFuZGxlVmlkZW9TdHJlYW0iLCJyZW1vdGVWaWRlb1N0cmVhbSIsInJlbW90ZVZpZGVvVmlldyIsIm9uIiwiYXN5bmMiLCJpc0F2YWlsYWJsZSIsImRpc3Bvc2UiLCJzdWJzY3JpYmVUb1JlbW90ZVBhcnRpY2lwYW50IiwicmVtb3RlUGFydGljaXBhbnQiLCJ2aWRlb1N0cmVhbXMiLCJmb3JFYWNoIiwidiIsImUiLCJhZGRlZCIsInN1YnNjcmliZVRvUmVtb3RlUGFydGljaXBhbnRJbkNhbGwiLCJjYWxsSW5zdGFuY2UiLCJsb2ciLCJjYWxsRW5kUmVhc29uIiwicmVtb3RlUGFydGljaXBhbnRzIiwicCIsImxvY2FsVmlkZW9WaWV3IiwidmlldyIsImNyZWF0ZVZpZXciLCJhcHBlbmRDaGlsZCIsInRhcmdldCIsImlkZW50aXR5Q2xpZW50IiwiaWRlbnRpdHlUb2tlblJlc3BvbnNlIiwiY3JlYXRlVXNlckFuZFRva2VuIiwidG9rZW4iLCJleHBpcmVzT24iLCJ1c2VyIiwiY29tbXVuaWNhdGlvblVzZXJJZCIsImlubmVySFRNTCIsImNhbGxDbGllbnQiLCJsb2dnZXIiLCJ0b2tlbkNyZWRlbnRpYWwiLCJjcmVhdGVDYWxsQWdlbnQiLCJkaXNwbGF5TmFtZSIsImdldERldmljZU1hbmFnZXIiLCJkaXNhYmxlZCIsInZpZGVvRGV2aWNlSW5mbyIsImdldENhbWVyYXMiLCJjYWxsZXJJZGVudGl0eSIsImluY29taW5nQ2FsbCIsImNhbGxlckluZm8iLCJpZGVudGlmaWVyIiwic3RhdGUiLCJjb25jYXQiLCJsb29wIiwibG9hZCIsInBsYXkiLCJwbGF5QXVkaW8iLCJyZW1vdmVkIiwicmVtb3ZlZENhbGwiLCJpbml0aWFsaXplIiwibWFpbiIsImNhdGNoIiwiYWRkRXZlbnRMaXN0ZW5lciIsInZpZGVvT3B0aW9ucyIsImxvY2FsVmlkZW9TdHJlYW1zIiwidXNlclRvQ2FsbCIsInZhbHVlIiwic3RhcnRDYWxsIiwic3RvcFZpZGVvIiwic3RhcnRWaWRlbyIsImhhbmdVcCIsInBhdXNlIiwiYWRkZWRDYWxsIiwiYWNjZXB0IiwidGhpcyJdLCJtYXBwaW5ncyI6IkNBQUNBLE9BQXFCLGFBQUlBLE9BQXFCLGNBQUssSUFBSUMsS0FBSyxDQUFDLENBQUMsR0FBRyxDQUU1REMsR0FDQSxTQUFVQyxFQUFRQyxFQUFxQkMsR0FFN0MsYUFDQUEsRUFBb0JDLEVBQUVGLEdBQ00sU0FBU0csR0FBK0IsSUFBSUMsRUFBNERILEVBQW9CLElBRS9ISSxF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